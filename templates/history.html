<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ user }}'s Task History</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>{{ user }}'s Task History</h1>
        <form action="{{ url_for('tasks') }}" method="get" style="margin-bottom: 20px;">
            <button class="btn" type="submit">Back to Today's Tasks</button>
        </form>
        {% for date in sorted_dates %}
            <h2 style="margin-top:30px;">
                {{ date }}
                {% if date_stars[date] == 2 %}
                    <span style="font-size: 1.5em; color: gold;">&#11088;&#11088;</span>
                {% elif date_stars[date] == 1 %}
                    <span style="font-size: 1.5em; color: gold;">&#11088;</span>
                {% endif %}
            </h2>
            <table class="task-table">
                <tr>
                    <th>Task</th>
                    <th>Status</th>
                    <th>Time</th>
                </tr>
                {% for row in grouped[date] %}
                <tr>
                    <td>{{ row['task'] }}</td>
                    <td>
                        {% if row['status'] == 'Done' %}
                            <span class="status-done">Done</span>
                        {% else %}
                            <span class="status-todo">TODO</span>
                        {% endif %}
                    </td>
                    <td>{{ row['time'] }}</td>
                </tr>
                {% endfor %}
            </table>
        {% endfor %}
    </div>
</body>
</html>